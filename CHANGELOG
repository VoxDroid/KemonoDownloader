# Kemono Downloader Release Notes

## v5.9.0 (09 February 2026)
**feat: Creator filename/folder customization, browser extension, and misc fixes**
- Add creator filename/folder customization
  Introduce customizable filename templates and folder strategies for the Creator downloader. Added SettingsTab options and persistence for `creator_filename_template` and `creator_folder_strategy`, UI widgets (preset templates, editable custom template, help button, folder strategy combo) and translated labels in `kd_language`. Implemented `generate_filename_and_folder` and `get_desc_folder_for_post` in `CreatorDownloadThread` to build sanitized filenames and target folders (`per_post` / `single_folder` / `by_file_type`), support auto-rename counters, avoid duplicating creator folder segments, and write per-post description files (`desc_{post_id}.txt`) into appropriate folders. Added top-level exception protection and logging in download threads for more robust error handling. Added faulthandler enable in `tests/conftest.py` and multiple unit tests covering templates, folder strategies, UI behavior, and thread safety. Also updated `.gitignore` (add `.briefcase`) and extended settings confirmation/applied dialogs to include the new options.

- Add initial Kemono Downloader browser extension
  Introduce a standalone browser extension for downloading content from Kemono and Coomer sites. Includes background script for downloads and CORS handling, content script for UI and post parsing, manifest, assets, and documentation.

- Add browser extension tab and documentation
  Introduces a new 'Browser Extension' tab in the application, providing users with information and instructions for the standalone browser extension. Updates the README with a detailed section on the browser extension, and adds relevant translations and UI logic to support the new tab.

- Improve file progress display and direct downloads of the browser extension
  Enhanced progress messages in the background script to include file index and total, improving clarity during multi-file downloads. Added filename truncation for better UI in content script, and switched to direct anchor-based downloads for ZIP and text files to improve compatibility, especially in incognito mode. Updated manifest with new version, author, and homepage.

- Ensure boolean type for Tor button state checks
  Wrapped `tor_exists` in `bool()` when setting enabled state for test and start Tor buttons to ensure correct type is used. This improves code clarity and prevents potential issues with non-boolean values.

- Update CI to use libasound2t64 on Ubuntu
  Replaces `libasound2` with `libasound2t64` in the list of packages installed on Ubuntu in the CI workflow. This ensures compatibility with updated package naming conventions.

- Update dependencies and Debian system requirements
  Added `types-requests` to test requirements and several new Debian system packages under `system_requires` for better compatibility. Removed `asyncio` from the main requirements list.

- Improve Tor auto-detection and fix image preview loading
  Enhanced Tor executable auto-detection to search app-local directories before system locations, including walking subfolders for tor binaries. Fixed image preview loading by wrapping downloaded data in `QByteArray` for `QPixmap`. Added type stubs for `fake_useragent` and `qtawesome`. Updated tests to cover new Tor detection logic.

- Improve API fetch robustness and manifest compatibility
  Enhances the extension's ability to fetch post data by adding fallback parsing, background fetches with custom headers, and improved error handling for sites with non-standard API responses or authentication requirements. Updates the manifest to use Manifest V2 for cross-browser compatibility and documents MV2/MV3 differences and troubleshooting steps in the README.

## v5.8.0 (07 January 2025)
**feat: Enhanced download capabilities, Tor compatibility, and UI improvements**
- Fix Tor startup issues on Linux and cross-platform compatibility. Create temporary torrc file to avoid system config conflicts on Linux. Use --torc-file argument for clean Tor initialization.
- Add FLAC file support to downloader and preview. This commit adds support for the FLAC audio file format across the creator and post downloader modules. FLAC files can now be detected, previewed, and filtered using the UI checkboxes.
- Add option to download post text as desc.txt. Introduces a checkbox in both creator and post downloaders to enable downloading post text content as desc.txt. Implements logic to fetch, parse, and save post descriptions, with translations and logging for success or failure. Updates language file with new translation keys.
- Enable multi-selection and bulk actions in post/file lists. Updated both CreatorDownloaderTab and PostDownloaderTab to support extended selection in their respective QListWidgets. Checkbox toggling and item highlighting now apply to all selected items, allowing for bulk operations. Refactored selection handling and removed single-item click handlers in favor of selection change events.
- Improve URL parsing and query handling for creator downloads. Enhanced URL parsing logic to robustly extract service and creator IDs, including handling of query parameters such as offset and search queries. Added support for single-page requests and improved error handling for malformed URLs. Updated related methods to consistently clean extracted values and handle unexpected URL structures.

## v5.7.0 (28 December 2025)
**feat: Add proxy and Tor support to settings and downloads, and localize log messages in post_downloader.py**
- Introduces proxy configuration (custom and Tor) in the settings UI, including Tor process management, auto-detection, and testing. Updates language strings for proxy/Tor options and confirmation dialogs. Refactors download logic to use requests with proxy support, and ensures proxy settings are respected throughout the downloader. Adds PySocks to requirements for SOCKS proxy support.
- Replaced hardcoded log and tooltip strings in post_downloader.py with calls to the translation system, using new keys added to kd_language.py for improved localization.

## v5.6.0 (23 December 2025)
**feat: Enhanced UI features, URL normalization, and import functionality**
- Added a new button to import creator/posts URLs from a .txt file
- Normalize URLs by stripping trailing slashes. Consistently remove trailing slashes from URLs in creator_downloader.py and post_downloader.py to prevent duplicate queue entries and ensure uniform URL handling
- Add post list pagination and global check-all to UI. Implements pagination controls for the creator post list, allowing users to navigate posts in pages and improving performance with large post sets. Adds a new 'Check ALL (All)' checkbox to select/deselect all posts across all pages, and updates the UI and language files to support these features. Also improves post fetching, incremental UI updates, and error handling for post detection and cancellation.
- Redesign intro screen with app image and footer. Refactored the IntroScreen layout to feature a prominent app image and version label, moved the app title, developer, and GitHub link to a smaller footer, and adjusted spacing for a cleaner appearance

## v5.5.1 (3 November 2025)
**feat: Fix and restored download completion for creator downloader**
- Fixed download completion to trigger finish on every posts downloaded.

## v5.5.0 (3 November 2025)
**feat: Added performance improvements and error fixes**
- [#45](https://github.com/VoxDroid/KemonoDownloader/pull/45) Performance improvements for UI elements and connection optimizations
- [#49] (https://github.com/VoxDroid/KemonoDownloader/pull/49) Improvements for edge cases on file completion handling and error fix for filter thread

## v5.4.0 (10 September 2025)
**feat: Added customizable retry count settings, fix thread settings, and improved download handling**
- [#39](https://github.com/VoxDroid/KemonoDownloader/pull/39) Add home folder permissions for Flatpak
- [#42](https://github.com/VoxDroid/KemonoDownloader/pull/42) Added customizable retry count settings in the settings page, removing the hardcoded values.
- [#44](https://github.com/VoxDroid/KemonoDownloader/pull/44) Improved download handling, counting and fetching files.
- Suppress MarkupResemblesLocatorWarning from BeautifulSoup

## v5.3.0 (28 August 2025)
**feat: Add .webp support for image previews and filters**
- Extended image preview, detection, and filter logic in creator_downloader.py and post_downloader.py to include .webp files alongside existing image formats.

## v5.2.0 (22 August 2025)
**feat: Added domain config support for coomer.st, Refactor logging, and completed translation for help documentation**
- Refactored creator_downloader.py and post_downloader.py to dynamically select API endpoints, referers, and base URLs based on the input URL's domain (kemono.cr or coomer.st).
- Replaced all direct string formatting in log messages with translation keys and parameterized calls to `translate()` throughout creator_downloader.py. Added corresponding translation keys and multi-language support for all log messages in kd_language.py.
- Added Simplified Chinese translations for all help/manual sections in kd_language.py
- Changed all English, Japanese, and Korean translation strings to reference Kemono.cr instead of Kemono.su, including URLs and descriptive text.

## v5.1.0 (20 August 2025)
**feat: Enhanced last page detection, expanded logging capabilities, and a new feature to open directories**
- Enhanced tracking to accurately detect the last page based on previous fetches, eliminating confusing "failed" messages.
- Added expand logs functionality for both creator and post downloader, improving debugging and user experience.
- Added an "Open Directory" button in the Settings tab to directly open the file explorer.

## v5.0.0 (17 August 2025)
**feat: Improve API request robustness and gzip handling**
- Enhances API request logic in creator_downloader.py and post_downloader.py by adding multiple endpoint attempts, robust header management, and retry mechanisms. 
- Adds gzip decompression for API responses, improves error handling and logging, and refactors code to use shared request and response parsing utilities. 
- Also updates UI logic for checkbox toggling and file preparation threads for better reliability.
- Add ".JPE" extension.

## v4.3.0 (28 July 2025)
**feat: Add auto rename functionality to both post and creator downloaders**
- Add auto rename checkbox to both downloader tabs with default enabled state
- Implement sequential file numbering (1_filename, 2_filename, etc.) when enabled
- Maintain original filename structure while adding numerical prefix for organization
- Update UI translations to support auto rename feature across all language files
- Preserve file extensions and handle edge cases for filename sanitization
- Add per-post file counter tracking for creator downloader to ensure proper sequencing

## v4.2.0 (28 July 2025)
**feat: Add 'CLIP' Extension and domain adjustment**
- Adjusted the domain from kemono.su to kemono.cr
- [#26](https://github.com/VoxDroid/KemonoDownloader/pull/26) [gitwawa1/main](https://github.com/VoxDroid/KemonoDownloader/commit/2cab17d63ea1e446edf64ad13455b09adb40be44)

## v4.1.0 (07 May 2025)
**feat: Partial Localization for Simplified Chinese**
- [#15](https://github.com/VoxDroid/KemonoDownloader/pull/15) [detached64/feature/zh-CN-localization](https://github.com/VoxDroid/KemonoDownloader/commit/8ad2cb2bb54de2a2e50c983959eb3df1fff0ed67)

## v4.0.0 (20 Apr 2025)
**feat: Overhaul CreatorDownloaderTab with async downloads and better error tracking**
Revamped `CreatorDownloaderTab` and `CreatorDownloadThread` to use async downloads, track failed files better, and log more details for debugging.
- Added `asyncio`, `aiohttp`, `ClientSession`, and `ClientTimeout` imports for async downloads.
- Switched `CreatorDownloadThread` to async with `aiohttp` for faster, smoother batch downloading.
- Removed "Download All Links" checkbox to focus on manual post selection.
- Added `self.failed_files` to `CreatorDownloaderTab` and `CreatorDownloadThread` to track failed files centrally.
- Improved `cleanup_thread`:
  - Logs thread removal and failed file transfers.
  - Moves failed files from `CreatorDownloadThread` to `self.failed_files`.
  - Counts failed files in completion check.
  - Cleans up leftover threads with better error handling.
  - Logs failed files and active threads.
- Updated `update_file_completion`:
  - Safely checks threads for failed file errors, defaults to "Unknown error".
  - Stores failed files in `self.failed_files`.
  - Adds `success` parameter to handle failures.
  - Triggers `creator_download_finished` when all files are done.
- Enhanced `CreatorDownloadThread`:
  - Fetches creator names and post titles for better folder naming.
  - Logs detailed download progress and errors.
- Added failed file summary in `creator_download_finished` for clearer feedback.
- Made console logs clearer, no more cluttered tracebacks.
- Remove trailing dots (Windows compatibility - sanitization for folder naming convention) for both `Creator Downloader` and `Post Downloader`.

## v3.9.1 (19 Apr 2025)
**fix: Ensure consistent post folder naming with {post_id}_{post_title} for all offsets**
Fixes the issue where post folders were named `{post_id}_Post_{post_id}` for posts beyond the first 50 due to missing pagination in title fetching.
- Added pagination to `fetch_creator_and_post_info` in `CreatorDownloadThread` to fetch titles for all posts across offsets.
- Ensures folder naming convention is `{post_id}_{post_title}` for all posts, matching `PostDetectionThread` pagination logic.
- Increased the maximum retries for downloading and fetching attempts from 5 to 50 for `Post Downloader` and `Creator Downloader`.

## v3.9.0 (17 Apr 2025)
**feat: Add {id}\_{post_title} and {id}\_{creator_name} folder naming for downloaders**
- Implemented `{id}_{post_title}` folder naming in `post_downloader.py`
- Implemented `{id}_{creator_name}` and `{id}_{post_title}` folder naming in `creator_downloader.py`
- Added methods to fetch post titles, creator names, and sanitize filenames
- Updated download logic for consistent file organization

## v3.8.0 (16 Apr 2025)
**feat: Add retry logic with countdown in post_downloader.py**
- Implemented 5-attempt retry with customizable 5-second countdown in `post_downloader.py` for `fetch_and_detect_files`.
- Added line-by-line countdown logging for each retry delay second.
- Introduced `retry_delay_seconds` variable for flexible retry timing.
- Enhanced error handling for HTTP 429 and exceptions with detailed retry logs.
- Maintained existing thread termination checks for consistency.

## v3.7.0 (16 Apr 2025)
**feat: Add retry logic and fix thread termination in downloaders**
- Implemented 5-attempt, 3-second countdown retry in `post_downloader.py` and `creator_downloader.py` for robust downloads.
- Resolved `ResourceWarning` in `post_downloader.py` with `with` statements.
- Fixed `RuntimeError` in `creator_downloader.py` by improving thread cleanup.
- Enhanced `cancel` methods to stop retries instantly with safe thread termination.
- Added translation keys for retry logging.
- Adjusted Max Simultaneous Downloads from 10 to 20

## v3.6.0 (09 Apr 2025)
**fix: ResourceWarnings and Select All in Downloader Tabs**
- Fixed `ResourceWarning` in `creator_downloader.py` with `with` statements for file hashing.
- Updated `CreatorDownloaderTab` to toggle "Select All" only for visible posts.
- Updated `PostDownloaderTab` to toggle "Select All" only for visible files.

## v3.5.0 (07 Apr 2025)
**Added**
* Dynamic `Accept-Language` header based on the user's system language, supporting Windows, Linux, and macOS.
* Dynamic `User-Agent` header using the `fake-useragent` library to always mimic a modern Chrome browser.
* Platform-specific locale detection using `ctypes` on Windows to accurately map LCIDs to language tags.
* Added a github workflow file to automate the building process.

**Changed**
* Updated the `User-Agent` header to use a recent Chrome version dynamically (previously hardcoded to Chrome 91).

**Dependencies**
* Added `fake-useragent` as a new dependency for dynamic User-Agent generation.

## v3.4.0 (06 Apr 2025)
* Integration of briefcase
* Added reset to defaults button for settings configuration
